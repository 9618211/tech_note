#锁

分类对比:
	
	MyISAM:表锁
		无死锁 开销小
		查询为主
		 
	innoDB:行锁
		大量按索引,并发更新少量不同的数据
		select  status like "innodb_row_lock%"
		show innodb status;
		select for update 
		select in share mode
		
'InnoDB行锁实现'

	索引项加锁实现,无索引隐藏聚簇索引对记录加锁
	
	record lock 
	gap lock
	next key lock
	
	注意事项:
		不通过索引条件检索,仍未表锁
		不同行访问使用相同的索引键,仍冲突
			select * from table where id=1 and name='a' for update;
			select * from table where id=1 and name='4' for update;
		不同索引不冲突:
			select * from table where id=1 for update;
			select * from table where name='2' for update;
			
		有索引但量大仍未全表扫描
		
`next key lock`
	
	范围条件 符合的已有数据的索引项加锁
	再范围内但是不存在的记录加间隙锁
			防止幻读
			恢复和复制需要
			